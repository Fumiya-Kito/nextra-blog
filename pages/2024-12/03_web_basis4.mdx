# 【Web】知っておきたいWebエンジニアリング各分野の基礎知見80④

## フロントでのパフォーマンスの測定方法/改善手法について説明せよ。
1. Lighthouse/ Chrome DevToolsなどのツールを活用して、パフォーマンスを落とすボトルネックとなっている部分を特定
2. 不要なレンダリングの除去、キャッシュ活用、API最適化などボトルネックに応じた改善→1に戻る
```a filename="lighthouseの指標"
Largest Contentful Paint (LCP): 最大のコンテンツが表示されるまでの時間。
First Input Delay (FID): 最初の入力に応答する時間。
Cumulative Layout Shift (CLS): レイアウトの不安定さ。
```


## Webアクセシビリティとは何か？アクセシビリティを高める方法を説明せよ。
「視覚・聴覚機能などに障がいのある方や、加齢で機能が低下している高齢者などを含む全ての人が、Webで提供されている情報にアクセスし利用できること」をWebアクセシビリティと呼ぶ。JISが定めており、
- ページの内容が分かるページタイトルを記述する
- 読み上げ機能が使えるように、画像の代替テキストを用意する
- エラーメッセージではエラー箇所と修正方法を明示する
- テキストリンクは、リンク先が分かる文言にする
など含め１０項目がアクセシビリティ確保に最低限必要な処置としてあげられる。

## div要素にonClickをつけないほうがいい理由はなにか?
- タブキーでのフォーカスを当てられない
- エンタキー/スペースでボタンのアクションを実行できない
- スクリーンリーダーが適切に読み上げてくれない
などの問題があるので、button要素にonClickをつけるようにする。

## 仮想DOMとは何か？仮想DOMは何を解決しているか？
- ReactはUIをブラウザへ表示するために必要なDOMを得るために、木構造で構成されるツリーをインメモリに展開する。
- この仕組みを仮想DOMと呼び、ライブラリが備えている差分検知アルゴリズムがコンポーネントの更新時に差分を検知し、変更のあった差分のみを実DOMに転写し変更を反映させる。
- 今までjQueryで命令的に要素を変更しなければいけなかった所が宣言的に実装することが可能となり、現実的なパフォーマンスを維持しつつ宣言的UIでの実装を可能にしてくれる。

- 仮想DOM（Virtual DOM）は、UIを効率的に更新するために使われるメモリ上の軽量なDOMツリーの表現
1. 仮想DOMの生成
Reactなどのライブラリが、UIを表現する仮想DOMツリーをメモリ上に生成します。この仮想DOMは、実際のブラウザDOMと同様にツリー構造を持っていますが、軽量で直接的なレンダリングは行いません。

2. 変更検知と差分計算
コンポーネントの状態やプロパティが変化すると、新しい仮想DOMツリーが作られます。ライブラリは**差分検知アルゴリズム（Diffing Algorithm）**を用いて、新旧の仮想DOMツリーを比較し、変更点（差分）を特定します。

3. 実DOMの更新
差分検知で特定された最小限の変更を、効率的に実DOMへ反映します。この部分的な更新によって、パフォーマンスが向上します。

### 従来の命令的アプローチ:
```
jQueryなどでは「どの要素をどのように変更するか」を逐一指示する必要がある。
→状態とUIの同期が複雑化。
仮想DOMを用いた宣言的アプローチ:
Reactでは「状態がこうなればUIはこうなる」という形で実装するだけで済む。
仮想DOMが状態変更をもとに最適なDOM操作を自動で行う
```