# TypeScript誕生の背景

- JavaScriptは元々、大規模な開発を想定した設計していなかった
- TypeScriptは、JavaScriptでも大規模なアプリケーションを開発しやすくすることを目的に開発されたプログラミング言語
- JavaScript自体が進化して、大規模開発に対応すればよかったが、大規模開発の一部はTypeScriptが引き受けることになった

なぜ、そうなったのか？JavaScriptの歴史を紐解いてゆく

## 1990年代
### JS誕生
- JS誕生以前は、簡単なバリデーションでもサーバーサイドで実装する必要があった
- Netscape Navigator(ブラウザ)を開発していたNetscape社は、クライアントサイドで動くプログラムの必要性に気づく
- 1995年、Netscape社はNetscape Navigatorで動くスクリプト言語として、JavaScriptを実装した

### JSはHTMLの補助的な道具
- 当時のJavaScriptは、HTMLの補助的な言語と考えられていた
- 用途は簡単なアニメーション実装、フォームのバリデーションに使う程度
- **大規模なアプリケーションを作るための言語とは見なされていなかった**
- 1990年代のJavaScriptは、現代のように必須のものでは決してなく、あくまで補助的・随意的な立ち位置の言語だった

## 2000年代初頭
### くすぶりはじめる大規模開発のニーズ
- 当時、Webアプリケーションの実装手段として、JavaアプレットやAdobe Flashが主流だった
- しかし、1997年にMicrosoftがJavaScript製のOutlook Web Access 2000(webメーラー)を市場投入しました
<br/> → この時代、JavaScriptはまだサーバーと通信することができなかった
<br/> → 後のXMLHttpRequest(XHR)となるXMLHTTPという機能をInternet Explorerに追加した
- この一例のように、対話型のUIを備えた大規模なウェブアプリケーションがJavaScriptで開発できるようになることが望まれだしてきた

### 失われた10年
- この頃には、JavaScriptはNetscape社が所有する言語から、ウェブ業界を上げて取り組む言語になってきた
- そのため、JavaScriptの言語仕様はECMAScriptという名で策定され、各ベンダーがその仕様に基づいてそれぞれJavaScriptを実装するという流れになった
- このECMAScriptを策定する会合が**TC39** (Netscape社やMicrosoft社を始めとしたベンダーが参加)

- 1999年頃、TC39では新たな言語仕様である「ECMAScript 4」の策定についての議論をから始めていた
- このES4では、大規模開発に耐えうる言語として、主に次のような野心的な言語仕様が議論されていた:

1. モジュール
2. Javaのようなクラス
3. 静的型付け
4. Nullable型
5. ユニオン型
6. ジェネリクス

- これらはみなTSが持っている
- 今から20年前のJavaScriptにおいても、「大規模開発」という共通の問題意識を持ち、TypeScriptと同じような解決策が検討されていた
<br/>→このときES4は正式な仕様として採用されていれば、TyepScriptという言語は必要なかったかもしれない
<br/>→結果は、保守的な立場を取るMicrosoft社と、革新的な変更を加えたいNetscape社で対立が起こり、政治的な背景からも折り合いをつけられなかったES4の草案は、2008年についに破棄されることとなる

- 一度は大規模化を目指したJavaScriptでしたが、その目標を達成できないまま、約10年の年月が流れることとなる

### Google Mapの衝撃
- 2005年、Google Mapが登場した
- 画面遷移なしにスムーズに地図を操作できるGoogle Mapは、当時の感覚で言えば、ネイティブアプリの操作感をウェブページで実現した画期的な発明だった
- Google Mapの操作性を裏で支えたのが、AJAX
- AJAXは“Asynchronous JavaScript and XML”の略で、XMLHttpRequestオブジェクトによる非同期のHTTP通信を利用し、ページをリロードなしにサーバーからXMLでデータを取得し、HTMLの一部を書き換える技術
- Google Mapは多くのプログラマに衝撃を与えました。AJAXに脚光を浴びせただけでなく、JavaScriptでも立派なアプリケーションが作れることを証明した

## 2000年代後半
### 大規模化のニーズの強まり
- GoogleMapを見た開発者たちは、実行にブラウザしか必要としないWebアプリケーションに魅力を感じた
- この頃から、WebフレームワークをはじめとするフロントエンドWebアプリケーション開発のツールが続々と発明される流れになっていく

### 進化なきJS、一世風靡のAltJS
- JavaScriptの開発スタイルは一変し、大規模化が進む中、ES4が2008年にご破算となったように、JavaScript自体には動きが見られない
- 開発者の中にはこう考える人々が現れました。
<br/> →「JavaScript本体が良くならないなら、JavaScriptにコンパイルできる言語を作ればいいのではないだろうか？」

- 2009年のCoffeScriptの成功を皮切りに”コーディングは別の言語で行い、それをJavaScriptにコンパイルするというアプローチ”を採用する言語(**AltJS**)が数多く開発されるようになった
- 言語から言語にコンパイルすることを「トランスパイル」と言いますが、この言葉が定着したのもこの頃である

### ECMAScript 2015始動
- 2008年、TC39でJavaScriptを改善しようという議論が再開した
- ES4は革新的すぎたため、保守派から大きな反対にあった
- そこで、ES4ほど革新的ではなく、既存のJSとの互換性を保ちながらES4の成果を取り込むための折衷案として、Harmonyという新しい言語仕様が検討された
- Harmonyにはclass構文や、module構文、import/exportなど大規模開発を想定した言語仕様が提案された
- そのうちのいくつかは、のちのECMAScript 2015に採用されることになる

## 2010年代
### TypeScriptの誕生
- ECMAScript 2015の策定に向け、TC39で大規模開発の議論が活発になる中、2012年に発表されたのがTypeScriptである
- TypeScriptは誕生当初より、ますます困難になるJavaScriptの大規模開発に焦点を当てた
- 特に強調された特徴が、JavaScriptの**スーパーセット、モジュール性、そして型**である

- CoffeeScriptがJavaScriptの文法とは大きく異なる独自路線を打ち出したのに対し、TypeScriptはJavaScriptの文法を拡張するに留める「JavaScriptのスーパーセット言語」としての戦略を採用した
<br/>→ TypeScriptを導入したとしても、既存のJavaScript資産はそのまま活用できる
<br/>→ チームの学習にも突発的なコストがかからない
<br/>→ 大規模開発でもすぐに導入できるメリットがある

- モジュール性は大規模開発ではとても重要である
- コードを適切な粒度に分割し整理できたり、実装の詳細をカプセル化できたり、変数名や関数名が衝突しないような言語仕様がなければ、大規模開発はかなり難しいものとなる
- 当時のJavaScriptには、モジュールシステムや名前空間といったものが無かったため、大規模開発を難しいものにしていた
- TypeScriptは、この問題を解決するためにES2015の提案に上がっていたクラスやモジュールの構文を先取りし、モジュール性を実現した

- 型はTypeScriptの最大の特徴である
- 型の恩恵として、コーディング中にコードジャンプやコード補完ができ、型情報がドキュメントにもなり、プログラムを動かす前にソースコードのチェックを行えるようになった

### 薄れないTypeScriptの強み
- TypeScriptが発表された後、TypeScriptが手本としたECMAScript 2015は正式に発表され、その後、ECMAScriptは毎年アップデートされるようになった
- 一時期停滞したJavaScriptも、大規模開発のハードルを下げるべく年々進化を遂げている
- そうした中で、TypeScriptが誕生当初に掲げていた3大特徴のうち、モジュール性はJavaScriptの仕様にも盛り込まれ、その部分ではTypeScriptは優位性を失った
- しかし、TypeScriptの目玉である「型」は、今日でもJavaScriptの仕様には盛り込まれていない
- 大規模開発をするにあたって、型は非常に重要な言語仕様であり、JavaScriptが進化を続ける中においても、TypeScriptの「型」というのは今でも確固たる強みであることは間違いない


## 参照
[サバイバルTypeScript](https://typescriptbook.jp/overview/before-typescript)