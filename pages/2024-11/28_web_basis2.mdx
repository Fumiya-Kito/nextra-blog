# 【Web】知っておきたいWebエンジニアリング各分野の基礎知見80②

## ブラウザレンダリングの仕組みを説明せよ。
### ①Loading(リソース読み込み)
1. URLに含まれるホスト名をDNSが解決しIPアドレスに変換
2. TCP(HTTPSであればTLS)接続の確立が行われ、HTTPリクエストの送信とHTTPレスポンスの受け取りが行われる。
3. HTLM/CSS/JavaSript/画像などのリソースを読み込む。
4. HTMLはDOMツリーに、CSSの場合はCSSOMツリーに変換が行われ、それ以外のリソースもレンダリングエンジンの実装に従った内部表現に変換される
### ②Scripting(JavaScriptの実行)
- JavaScriptの字句解析、構文解析、コンパイルを経たコードが実行される
### ③レイアウトツリー構築
- スタイルの計算を行い、DOMツリー内の全てのノードの視覚的な情報の計算を行う。
### ④Painting(レンダリング結果の描写)
- ピクセル化された情報を合成し、最終的なレンダリング結果を表示する。

※ 初期読み込みが終わって描画が終わってからも、ユーザーやブラウザの何らかのアクションや、JavaScriptのコード実行、イベントによってレンダリングは引き起こされる(再レンダリング)

## クリティカルレンダリングパスとは何か？
Webページの初回の描画に必ず必要な工程を、クリティカルレンダリングパスという。Googleの開発者、Llya Grigorikによると1000ミリ秒以下に抑えることが望ましい

## Webパフォーマンスの指標となる「RAIL」について説明せよ。
「RAIL」はGoogleの開発者が提唱した、WEBサイトのパフォーマンスモデルの指標を指す。人間が感じる「速さ」の目安を、WEBサイトのパフォーマンス指標に落とし込んだもの。
- Response(応答): ユーザーのサイト上でのアクションに対して、WEBサイトが応答するまでの時間。100ms未満が望ましいとされている。
- Animation(アニメーション): アニメーションのフレーム処理(JavaScriptの実行、DOMのレイアウト計算、DOMの描画)を、16ms以内で簡潔させること。対策として、JavaScriptの処理はシングルスレッドを避け、非同期関数(requestAnimationFrameなど)を使用する。
JavaScriptに依存せずに、CSSを活用してパフォーマンスを向上させるなどの方法。
- Idle(アイドル処理): RAILのIdleでは、アイドル状態で実行されるJavaScriptの処理時間を50ms未満に抑えるように定義している。アイドル状態とは、Response、Animation、Loadが一度終了し、ユーザーのアクションを待っている状態のことを指す。
- Load(読み込み): Loadは、WEBサイトのコンテンツの読み込みにかかる時間を指す。
RAILではこのLoad処理を1000ms未満で完結させるように定めている。つまり、`Loading→Scripting→Rendering→Painting`のプロセスを1000ms未満で完結させることが必要。

## コアウェブバイタルズとは何か、説明せよ。
UX（ユーザーがサイトを通じて得る体験）の質を計測するための指標のこと。`LCP`、`FID`、`CLS`という3つの指標で構成されており、主にサイトの使い勝手を重要視している。
同じような内容・質のページが複数あった場合、コアウェブバイタルが優れたものが検索上位に表示される。
- LCP(Largest Contentful Paint): ページの読み込み速度を表す。ページ内における最も大きなコンテンツ（画像や動画など）が表示されるまでの時間を評価するもので、読み込み開始から最大コンテンツが表示されるまでが2.5秒未満であることが望ましいとされる。
- FID(First Input Delay): サイトの反応速度を評価。「初回入力遅延」を意味する。初回入力とは、ユーザーがページを訪れてから最初に行う操作（ボタンクリックやタップなど）のことでFIDは、その操作を行ってから応答が発生するまでの遅延時間を指す。理想的な遅延時間は100ミリ秒未満。
- CLS(Cumulative Layout Shift): ページの読み込み中に起こるレイアウトのずれを測定している。急にレイアウトがずれたりして、ユーザーに不便とならないかどうかを確認している。スコアは0（移動なし）～1（画面における最大の移動量）で表され、0.1未満が理想的とされている。

## CSR、SSG、SSRの違いを説明せよ。
- CSR: 通信の結果必要となった差分情報を得てブラウザでHTMLを更新する
- SSR: 通信の結果サーバーがHTMLを返し、ブラウザで表示する
- SSG: アプリをビルドするタイミングでレンダリングを行い、各ページのHTMLを表示させる




