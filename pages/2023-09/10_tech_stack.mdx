# NextJSで予約サイトをつくるときの技術選定

## 機能で実現したいこと
1. 予約管理
2. 決済
3. ログイン認証

現状の予測は、2,3は外部サービスで比較的簡単と予想。
1はUserが事業者と顧客の2種類あるため管理が難しそう。
別アプリとするか。ユーザー認証でロールを割り当てるか。


### 対応技術(何でやるか？)
1. PostgreSQL(RDBMS), Prisma(ORM)
2. Stripe API
3. NextAuth

Next+Prisma+PostgreSQLのWebアプリケーションに NextAuth, Stripeを追加する。
Supabase(BaaS)が必要になるかは現状よくわかっていない


## インフラ(デプロイ先)
- クラウド環境(AWS, GCP, Azure)
  - 高機能。コストとスケールの観点から最初はなし
- PaaS(Vercel, Netrify, Render, Heroku ...)
  - 簡単にできる(特にVercel)。コストは高い。
- VPS, レンタルサーバ(Conoha, Sakura, Xserver...)
  - セキュリティ面、時間的コスト、価格は安め
  - レンタルサーバは制約が多すぎて無理

とりあえずはVercelでいいと思っている。商用利用する際にPro版にしないといけなく、月20ドル。
Netrifyは無料でも商用利用していいが、VercelほどNextに最適化されていないのと、日本だとちょっと遅くなる？などあるらしい。



明日以降、試しにLocalでNextにポスグレ、プリズマ、NextAuthで認証アプリを作成してみる