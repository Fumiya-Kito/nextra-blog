# Honoを使ってRoutesを追加する

```sh
bun i hono
```

- `app.ts`ファイルを追加
- jsonを返す(HTMLなど好きなものを返すことが可能)
```ts filename="app.ts"
import { Hono } from 'hono'
const app = new Hono()

app.get('/test', (c) => {
  return c.json({"message": "test"});
})

export default app
```

- indexに`app.ts`を読み込む
```ts filename="index.ts"
import app from './app'

Bun.serve({
  fetch: app.fetch
});

console.log("Server running");
```

- ミドルウェアを使うことも可能
- `Logger`ミドルウェアを使ってロギングする

```ts filename="app.ts"
import { Hono } from 'hono'
import { logger } from 'hono/logger';

const app = new Hono()

app.use('*', logger());
app.get('/test', (c) => {
  return c.json({ "message": "test" });
})

export default app
```

- routesフォルダを使ってroutingする
- `new Hono()`に続いて`.get`のように各HTTPメソッドをチェインできる

```ts filename="routes/expense.ts"
import { Hono } from 'hono';

type Expense = {
  id: number;
  title: string;
  amount: number;
}

const fakeExpenses: Expense[] = [
  { id: 1, title: "Groceries", amount: 50},
  { id: 2, title: "Game", amount: 100},
  { id: 3, title: "Rent", amount: 500},
];

export const expensesRoute = new Hono()
.get("/", async (c) => {
  return c.json({ expense: []})
})
.post("/", async (c) => {
  const newExpense = await c.req.json();
  console.log({newExpense});
  return c.json(newExpense);
})
// .delete
// .put
```

- appに追加

```ts filename="index.ts"
import { Hono } from 'hono'
import { logger } from 'hono/logger';
import { expensesRoute } from './routes/expenses';

const app = new Hono()

app.use('*', logger());
app.get('/test', (c) => {
  return c.json({ "message": "test" });
})

app.route("/api/expenses", expensesRoute)

export default app
```

- これで`/api/expenses`に`body = {"title": "some expense",  "amount": 1234}`
などでPOST reqを送信することが可能になった
